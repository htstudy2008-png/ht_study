<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To√°n 12 - H&T STUDY</title>

    <link rel="stylesheet" href="../css/style.css">

    <script src="../../../dang-nhap/js/auth.js"></script>
    <script>
        // KI·ªÇM TRA ƒêƒÇNG NH·∫¨P
        if (typeof requireAuth === "function") {
            requireAuth();
        }

        // KI·ªÇM TRA QUY·ªÄN TRUY C·∫¨P KH√ìA
        document.addEventListener("DOMContentLoaded", () => {
            const user = JSON.parse(localStorage.getItem("currentUser"));
            if (!user) return;

            document.body.classList.add("logged-in");

            const ownedCourses = JSON.parse(localStorage.getItem("courses")) || [];

            if (ownedCourses.includes("toan12")) {
                document.body.classList.add("has-course-access");
            } else {
                document.body.classList.add("no-course-access");
            }
        });
    </script>
</head>
<body>

<header class="header">
    <div class="menu-icon" onclick="toggleMenu()">‚ò∞</div>

    <nav id="sidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="toggleMenu()">&times;</a>
        <a href="../../../trang_chu/html/index.html">Trang ch·ªß</a>

        <div class="sidebar-section">
            <span class="sidebar-title">To√°n</span>
            <a href="../../toan10/html/Toan10.html">To√°n 10</a>
            <a href="../../toan11/html/Toan11.html">To√°n 11</a>
            <a href="Toan12.html" class="active">To√°n 12</a>
        </div>

        <div class="sidebar-section">
            <span class="sidebar-title">H√≥a</span>
            <a href="../../../Hoa/hoa10/html/Hoa10.html">H√≥a 10</a>
            <a href="../../../Hoa/hoa11/html/Hoa11.html">H√≥a 11</a>
            <a href="../../../Hoa/hoa12/html/Hoa12.html">H√≥a 12</a>
        </div>

        <a href="../../../dang-nhap/html/login.html" id="auth-button-sidebar">ƒêƒÉng nh·∫≠p</a>
    </nav>

    <div class="logo-title">
        <img src="../../../hinh_anh/logo.png" alt="H&T STUDY Logo">
        <span class="site-title">H&T STUDY</span>
    </div>

    <nav class="top-nav">
        <ul>
            <li><a href="../../../trang_chu/html/index.html">Trang ch·ªß</a></li>

            <li class="dropdown">
                <a href="#" class="active">To√°n</a>
                <ul class="dropdown-menu">
                    <li><a href="../../toan10/html/Toan10.html">To√°n 10</a></li>
                    <li><a href="../../toan11/html/Toan11.html">To√°n 11</a></li>
                    <li><a href="Toan12.html" class="active">To√°n 12</a></li>
                </ul>
            </li>

            <li class="dropdown">
                <a href="#">H√≥a</a>
                <ul class="dropdown-menu">
                    <li><a href="../../../Hoa/hoa10/html/Hoa10.html">H√≥a 10</a></li>
                    <li><a href="../../../Hoa/hoa11/html/Hoa11.html">H√≥a 11</a></li>
                    <li><a href="../../../Hoa/hoa12/html/Hoa12.html">H√≥a 12</a></li>
                </ul>
            </li>
        </ul>
    </nav>

        <div class="user-menu">
        <button class="avatar-btn" id="avatar-btn">HS</button>
        <div class="user-dropdown" id="user-dropdown">
            <div class="user-dropdown-inner">
                <div class="user-label">H·ªçc sinh</div>
                <div class="user-name" id="user-name-display">Ch∆∞a ƒëƒÉng nh·∫≠p</div>
                <div class="user-code" id="user-code-display">M√£ h·ªçc sinh: ---</div>
                <hr>
                <button class="user-dropdown-link" id="btn-my-courses">Kh√≥a h·ªçc c·ªßa t√¥i</button>
                <button class="user-dropdown-link" id="btn-guide">H∆∞·ªõng d·∫´n</button>
                <button class="user-dropdown-link" id="btn-change-avatar">ƒê·ªïi avatar</button>
                <button class="user-dropdown-link user-auth-btn" id="user-auth-btn">ƒêƒÉng nh·∫≠p</button>
            </div>
        </div>
    </div>
    <input type="file" id="avatar-file" accept="image/*" style="display:none">
    <div id="avatar-alert" style="display:none;"></div>
</header>

<main class="content">

    <!-- üéØ BANNER GI·ªêNG TRONG ·∫¢NH -->
    <section class="course-hero">
    <div class="course-hero-inner">

        <div class="thumb-box">
            <span class="thumb-tag">TO√ÅN 12</span>
            <img src="thumb-toan12.png" alt="To√°n 12">
            <span class="owned-badge">ƒê√É ƒêƒÇNG K√ù</span>
        </div>

        <div class="course-meta">
            <h1>TO√ÅN 12 ‚Äì LUY·ªÜN THI CHUY√äN S√ÇU</h1>

            <div class="course-stats">
                <div class="stat">
    <strong>120+</strong>
    Video
</div>
                <div class="stat">
    <strong>30</strong>
    Chuy√™n ƒë·ªÅ
</div>
<div class="stat">
    <strong>500+</strong>
    B√†i t·∫≠p
</div>
                <div class="stat">Full PDF</div>
            </div>

            <div class="course-price">1.200.000ƒë</div>

            <button id="btn-view-course" class="btn-primary">
                V√ÄO H·ªåC NGAY
            </button>
        </div>

    </div>
</section>
<section class="course-tabs">

    <!-- TAB BUTTONS -->
<div class="tabs">
    <button class="tab-btn active" data-tab="overview">T·ªïng quan</button>
    <button class="tab-btn" data-tab="content">N·ªôi dung kh√≥a h·ªçc</button>
</div>

    <!-- TAB CONTENT -->
    <div class="tabs-content">

        <!-- T·ªîNG QUAN -->
        <div class="tab-panel active" id="overview">
            <div class="overview-text">
                <h2>Gi·ªõi thi·ªáu kh√≥a h·ªçc To√°n 12</h2>
                <p>
                    Kh√≥a h·ªçc <strong>To√°n 12 ‚Äì Luy·ªán thi chuy√™n s√¢u</strong> ƒë∆∞·ª£c thi·∫øt k·∫ø
                    d√†nh cho h·ªçc sinh l·ªõp 12 ƒëang h∆∞·ªõng t·ªõi m·ª•c ti√™u
                    <strong>ƒë·∫°t ƒëi·ªÉm cao trong k·ª≥ thi THPT Qu·ªëc Gia</strong>.
                </p>
                <p>
                    N·ªôi dung kh√≥a h·ªçc bao g·ªìm ƒë·∫ßy ƒë·ªß c√°c chuy√™n ƒë·ªÅ tr·ªçng t√¢m,
                    h·ªá th·ªëng b√†i t·∫≠p t·ª´ c∆° b·∫£n ƒë·∫øn n√¢ng cao,
                    k·∫øt h·ª£p luy·ªán ƒë·ªÅ s√°t c·∫•u tr√∫c ƒë·ªÅ thi th·∫≠t.
                </p>
                <p>
                    Ph√π h·ª£p cho h·ªçc sinh mu·ªën <strong>n√¢ng n·ªÅn ‚Äì b·ª©t ph√° ‚Äì v·ªÅ ƒë√≠ch an to√†n</strong>.
                </p>
            </div>
        </div>

        <!-- N·ªòI DUNG KH√ìA H·ªåC -->
    <div class="tab-panel" id="content">
    <div class="courses-grid">

    <!-- KH√ìA XPS -->
    <div class="course-card unlocked">
        <button class="course-toggle">
            <span>XPS ‚Äì X√¢y d·ª±ng n·ªÅn t·∫£ng</span>
            <i class="arrow">‚ñæ</i>
        </button>

        <!-- CH∆Ø∆†NG -->
        <div class="chapters">

            <div class="chapter">
                <button class="chapter-toggle">
                    <span>Ch∆∞∆°ng 1: H√†m s·ªë</span>
                    <i class="arrow">‚ñæ</i>
                </button>

                <!-- B√ÄI -->
                <div class="lessons-grid">
                    <a href="lesson.html?id=xps-ch1-b1" class="lesson-item"
                        data-lesson-id="xps-ch1-b1">
                        B√†i 1: T·∫≠p x√°c ƒë·ªãnh
                    </a>
                    <a href="lesson.html?id=xps-ch1-b2" class="lesson-item"
                        data-lesson-id="xps-ch1-b2">
                        B√†i 2: S·ª± bi·∫øn thi√™n
                    </a>
                </div>
            </div>

            <div class="chapter">
                <button class="chapter-toggle">
                    <span>Ch∆∞∆°ng 2: H√†m m≈© ‚Äì Logarit</span>
                    <i>‚ñæ</i>
                </button>

                <div class="lessons-grid">
                    <a href="lesson.html?id=xps-ch2-b1" class="lesson-tile">
                        B√†i 1: C√¥ng th·ª©c
                    </a>
                    <a href="lesson.html?id=xps-ch2-b2" class="lesson-tile">
                        B√†i 2: V·∫≠n d·ª•ng
                    </a>
                </div>
            </div>

        </div>
    </div>

    <!-- KH√ìA B·ªä KH√ìA -->
    <div class="course-card locked">
        <div class="course-locked">
            üîí Luy·ªán ƒë·ªÅ t·ªïng h·ª£p  
            <small>B·∫°n ch∆∞a ƒëƒÉng k√Ω kh√≥a n√†y</small>
        </div>
    </div>

</div>
</section>
</main>
<div class="lesson-popup" id="lessonPopup">
    <div class="popup-overlay"></div>

    <div class="popup-box">
        <button class="popup-close">‚úï</button>
        <h3 id="popupTitle"></h3>
        <p id="popupDesc"></p>

        <button class="btn-primary popup-action">
            V√†o b√†i h·ªçc
        </button>
    </div>
</div>
<footer>
    <p>&copy; 2025 H&T STUDY</p>
</footer>
<script>
document.addEventListener("DOMContentLoaded", () => {

    /* =========================
       TAB SWITCH
    ========================= */
    document.querySelectorAll(".tab-btn").forEach(btn => {
        btn.addEventListener("click", () => {
            document.querySelectorAll(".tab-btn")
                .forEach(b => b.classList.remove("active"));
            document.querySelectorAll(".tab-panel")
                .forEach(p => p.classList.remove("active"));

            btn.classList.add("active");
            const target = document.getElementById(btn.dataset.tab);
            if (target) target.classList.add("active");
        });
    });

    /* =========================
       COURSE TOGGLE
    ========================= */
    document.querySelectorAll(".course-toggle").forEach(btn => {
        btn.addEventListener("click", () => {
            btn.closest(".course-card")?.classList.toggle("open");
        });
    });

    /* =========================
       CHAPTER ACCORDION
       (m·ªü 1 ch∆∞∆°ng ‚Üí ƒë√≥ng ch∆∞∆°ng kh√°c)
    ========================= */
    const chapters = document.querySelectorAll(".chapter");

    document.querySelectorAll(".chapter-toggle").forEach(btn => {
        btn.addEventListener("click", () => {
            const current = btn.closest(".chapter");

            chapters.forEach(ch => {
                if (ch !== current) {
                    ch.classList.remove("open");
                    ch.style.setProperty("--h", "0px");
                }
            });

            if (current.classList.contains("open")) {
                current.classList.remove("open");
                current.style.setProperty("--h", "0px");
            } else {
                const box = current.querySelector(".lessons-grid");
                current.classList.add("open");
                current.style.setProperty("--h", box.scrollHeight + "px");
            }
        });
    });

    /* =========================
       LESSON PROGRESS (ƒê√ÅNH D·∫§U ƒê√É H·ªåC)
    ========================= */
    function applyProgress(progress) {
        document.querySelectorAll(".lesson-item").forEach(item => {
            if (progress.includes(item.dataset.lessonId)) {
                item.classList.add("completed");
            }
        });
    }
    const saved = JSON.parse(
        localStorage.getItem("toan12_progress")
    ) || [];
    applyProgress(saved);
});
</script>
</body>
</html>




